# üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API

Base URL: `/api/auth`

---

## POST `/signup`

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ —Ç—Ä–µ–Ω–µ—Ä–∞).

**–î–æ—Å—Ç—É–ø:** PUBLIC

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `role` (optional) - —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`CLIENT` | `TRAINER`). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `CLIENT`

**Body (–¥–ª—è CLIENT):**

- –¢–∏–ø: `multipart/form-data`
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
  - `name` - –∏–º—è
  - `email` –∏–ª–∏ `phone` - –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  - `password` - –ø–∞—Ä–æ–ª—å
  - `age` - –≤–æ–∑—Ä–∞—Å—Ç
  - `photoFront` - —Ñ–æ—Ç–æ —Å–ø–µ—Ä–µ–¥–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - `photoSide` - —Ñ–æ—Ç–æ —Å–±–æ–∫—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - `photoBack` - —Ñ–æ—Ç–æ —Å–∑–∞–¥–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ: `goal`, `restrictions`, `experience`, `diet`

**Body (–¥–ª—è TRAINER):**

- –¢–∏–ø: `application/json`
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
  - `name`, `email` –∏–ª–∏ `phone`, `password`, `age`
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ: `telegram`, `whatsapp`, `instagram`, `bio`

**–û—Ç–≤–µ—Ç:**

```json
{
  "user": { ...userData },
  "token": {
    "accessToken": "..."
  }
}
```

Refresh token —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ cookie (httpOnly).

---

## POST `/login`

–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.

**–î–æ—Å—Ç—É–ø:** PUBLIC

**Body:**

```json
{
	"contact": "email@example.com –∏–ª–∏ +79991234567",
	"password": "password123"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "user": { ...userData },
  "token": {
    "accessToken": "..."
  }
}
```

**–û—à–∏–±–∫–∏:**

- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –∏–ª–∏ –ø–∞—Ä–æ–ª—å
- `404` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

---

## POST `/refresh`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ refresh token –∏–∑ cookie.

**–î–æ—Å—Ç—É–ø:** PUBLIC (—Ç—Ä–µ–±—É–µ—Ç—Å—è refresh token –≤ cookie)

**Headers:**

- Cookie: `refreshToken`

**–û—Ç–≤–µ—Ç:**

```json
{
  "user": { ...userData },
  "token": {
    "accessToken": "..."
  }
}
```

**–û—à–∏–±–∫–∏:**

- `401` - Refresh token –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω
- `401` - Refresh token –∏—Å—Ç–µ–∫

---

## POST `/logout`

–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã (—É–¥–∞–ª–µ–Ω–∏–µ refresh token).

**–î–æ—Å—Ç—É–ø:** CLIENT, TRAINER

**Headers:**

- `Authorization: Bearer <accessToken>`

**–û—Ç–≤–µ—Ç:**

```json
{
	"message": "–£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥"
}
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- Access token –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 15 –º–∏–Ω—É—Ç
- Refresh token –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 30 –¥–Ω–µ–π
- Refresh token —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ httpOnly cookie –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å 3 —Ñ–æ—Ç–æ
