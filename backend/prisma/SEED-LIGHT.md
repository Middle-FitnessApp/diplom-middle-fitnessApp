# Seed Light - Облегчённое заполнение базы данных

Облегчённая версия скрипта для быстрого заполнения базы тестовыми данными. Подходит для случаев, когда основной seed вызывает ошибки или работает слишком долго.

## Использование

```bash
npm run prisma:seed:light
```

## Что создаётся

- **10 тренеров** (trainer1@mail.ru - trainer10@mail.ru)
- **30 клиентов** (client1@mail.ru - client30@mail.ru)
- **~150 прогресс-отчётов** с фотографиями
- **Планы питания** с циклами 7/30 дней
- **Связи тренер-клиент** со статусами и избранным
- **Комментарии** к прогресс-отчётам

**Пароль для всех пользователей:** `123456`

## Структура фото

Все фотографии сохраняются локально в:

- `backend/uploads/photos/trainers/` - фото тренеров
- `backend/uploads/photos/clients/` - фото клиентов
- `backend/uploads/photos/progress/` - фото прогресса

## Особенности

- Все имена, контакты и описания генерируются случайно с помощью `@faker-js/faker`
- Скрипт использует `upsert`, поэтому безопасно запускать несколько раз
- Фото скачиваются с `picsum.photos` (существующие файлы не перезаписываются)
- Прогресс-бар показывает процент выполнения и оставшееся время
- Все пароли захешированы с помощью bcryptjs

## Настройка и кастомизация

### Изменение количества данных

В файле `seed-light.ts` можно изменить константы для количества создаваемых сущностей:

```typescript
// Измените эти значения для нужного количества
const trainersTotal = 10 // Количество тренеров
const clientsTotal = 30 // Количество клиентов
const progressPerClient = 5 // Количество прогресс-отчётов на клиента (в среднем)
```

### Добавление новых данных

#### Новые имена и фамилии

Добавьте элементы в массивы `maleNames`, `femaleNames`, `lastNames`:

```typescript
const maleNames = [
	'Александр',
	'Дмитрий',
	// ... существующие
	'Ваш Новое Имя', // Добавьте сюда
]
```

#### Новые цели клиентов

Расширьте массив `clientGoals`:

```typescript
const clientGoals = [
	'Снизить вес на 10-15 кг',
	// ... существующие
	'Ваша новая цель', // Добавьте сюда
]
```

#### Новые ограничения по здоровью

Добавьте в массив `restrictions`:

```typescript
const restrictions = [
	'Нет ограничений',
	// ... существующие
	'Ваше новое ограничение', // Добавьте сюда
]
```

#### Новые предпочтения в питании

Расширьте массив `diets`:

```typescript
const diets = [
	'Стандартное питание',
	// ... существующие
	'Ваша новая диета', // Добавьте сюда
]
```

#### Новые био для тренеров

Добавьте описания в массив `trainerBios`:

```typescript
const trainerBios = [
	'Сертифицированный тренер с 10-летним опытом...',
	// ... существующие
	'Ваше новое био тренера', // Добавьте сюда
]
```

#### Новые категории и подкатегории питания

Расширьте массивы `nutritionCategories` и `nutritionSubcategories`:

```typescript
const nutritionCategories = [
	{ name: 'Похудение', desc: 'Планы питания для снижения веса' },
	// ... существующие
	{ name: 'Ваша категория', desc: 'Описание' }, // Добавьте сюда
]

const nutritionSubcategories = [
	'Стандартный план',
	// ... существующие
	'Ваш подплан', // Добавьте сюда
]
```

#### Новые блюда

Добавьте варианты в массивы `breakfasts`, `snacks`, `lunches`, `dinners`:

```typescript
const breakfasts = [
	'Овсяная каша с бананом и орехами',
	// ... существующие
	'Ваше новое блюдо на завтрак', // Добавьте сюда
]
```

### Добавление большего разнообразия

#### Случайные веса и рост

В коде уже используется `faker` для генерации случайных значений. Для большего разнообразия можно добавить:

```typescript
// Вместо фиксированных значений используйте диапазоны
const weight = faker.number.float({ min: 50, max: 120, precision: 0.1 })
const height = faker.number.int({ min: 150, max: 200 })
```

#### Случайные комментарии

Увеличьте вероятность создания комментариев или добавьте больше вариантов текста:

```typescript
// Измените вероятность
if (faker.datatype.boolean({ probability: 0.8 })) {
	// Было 0.6
	// Создать комментарий
}
```

### Добавление новых полей

Если нужно добавить новые поля в модели Prisma, обновите схему и код seed:

1. Добавьте поле в `schema.prisma`
2. Запустите `npx prisma generate`
3. Добавьте генерацию значения в коде seed

Пример для нового поля `specialization` у тренеров:

```typescript
const specializations = ['Фитнес', 'Бодибилдинг', 'Йога', 'Бокс']

// В цикле создания тренеров
const specialization = faker.helpers.arrayElement(specializations)
```

### Отладка и тестирование изменений

После внесения изменений протестируйте seed на небольшой выборке:

```bash
# Измените trainersTotal = 1, clientsTotal = 1 для быстрого теста
# Запустите seed и проверьте результат
npm run prisma:seed:light
```

### Советы по оптимизации

- **Фото**: Если скачивание фото занимает много времени, уменьшите количество или закомментируйте загрузку
- **Комментарии**: Для быстрого теста установите `probability: 0` в создании комментариев
- **Логирование**: Добавьте `console.log` для отслеживания прогресса в длинных циклах
