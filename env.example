# ============================================
# FitnessApp - Environment Variables
# ============================================
# Скопируйте этот файл в .env и заполните значения
# cp env.example .env
#
# ⚠️ НИКОГДА не коммитьте .env файл в репозиторий!

# ═══════════════════════════════════════════
# 📊 DATABASE (Обязательно)
# ═══════════════════════════════════════════
# PostgreSQL connection string
# Формат: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
#
# Примеры:
# - Локальная БД: postgresql://postgres:123456@localhost:5432/fitnessapp
# - Supabase: postgresql://postgres.xxx:password@aws-0-eu-central-1.pooler.supabase.com:6543/postgres
# - Docker: postgresql://postgres:password@postgres:5432/fitnessapp
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/fitnessapp

# Direct URL (для миграций Prisma, обычно то же что DATABASE_URL)
# Для Supabase используйте прямое подключение вместо pooler
DIRECT_URL=postgresql://postgres:your_password@localhost:5432/fitnessapp

# ═══════════════════════════════════════════
# 🔐 SECURITY (Обязательно)
# ═══════════════════════════════════════════
# Секретный ключ для JWT токенов (минимум 32 символа)
# Сгенерировать: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_ACCESS_SECRET=your-super-secret-jwt-key-minimum-32-characters-long

# Секретный ключ для подписи cookies (минимум 32 символа)
COOKIE_SECRET=your-super-secret-cookie-key-minimum-32-characters-long

# ═══════════════════════════════════════════
# 🌐 APPLICATION
# ═══════════════════════════════════════════
# Режим работы: development | production
NODE_ENV=production

# URL фронтенда (для CORS)
# Development: http://localhost:5173
# Production: https://your-domain.ru
FRONTEND_URL=https://your-domain.ru

# URL API (передаётся в frontend при сборке)
# Оставьте пустым если API и frontend на одном домене
# Или укажите полный URL: https://your-domain.ru
VITE_API_URL=

# ═══════════════════════════════════════════
# 📁 SUPABASE STORAGE (Опционально)
# ═══════════════════════════════════════════
# Если не используете Supabase, оставьте пустым
# Файлы будут храниться локально в /uploads

# URL проекта Supabase
SUPABASE_URL=https://xxxxx.supabase.co

# Публичный ключ (anon key)
SUPABASE_ANON_KEY=eyJhbGciOiJI...

# Сервисный ключ (для серверных операций)
SUPABASE_SERVICE_KEY=eyJhbGciOiJI...

# Названия бакетов для хранения
SUPABASE_PHOTOS_BUCKET=fitness-photos
SUPABASE_DEFAULTS_BUCKET=default-assets

# ═══════════════════════════════════════════
# 🐘 POSTGRESQL (только для docker-compose с профилем with-db)
# ═══════════════════════════════════════════
# Используется только если запускаете PostgreSQL через docker-compose
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_postgres_password
POSTGRES_DB=fitnessapp

# ═══════════════════════════════════════════
# 🔧 OPTIONAL
# ═══════════════════════════════════════════
# Порт бэкенда (по умолчанию 3000)
PORT=3000

# ============================================
# 📝 ПРИМЕЧАНИЯ
# ============================================
#
# 1. ГЕНЕРАЦИЯ СЕКРЕТНЫХ КЛЮЧЕЙ:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. SUPABASE:
#    - Создайте проект на https://supabase.com
#    - Создайте бакеты: fitness-photos, default-assets
#    - Настройте политики доступа (RLS)
#
# 3. ПЕРВЫЙ ЗАПУСК:
#    - Скопируйте env.example → .env
#    - Заполните обязательные переменные
#    - Запустите: docker-compose -f docker-compose.prod.yml up -d
#    - Выполните миграции (автоматически при старте backend)
#    - Опционально: выполните seed данных
#
# 4. SSL СЕРТИФИКАТЫ:
#    - Следуйте инструкции в DEPLOY.md
#    - Используйте certbot для Let's Encrypt


